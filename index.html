<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infograf√≠a: Manejo del Dolor Pedi√°trico</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            margin: auto;
            height: 320px;
            width: 100%;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .pain-level-box {
            position: relative;
            padding-bottom: 2rem;
            margin-bottom: 2.5rem;
        }
        .pain-level-box:not(:last-child)::after {
            content: '‚¨áÔ∏è';
            position: absolute;
            bottom: -2.5rem;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2rem;
            color: #94a3b8;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
   
    <!-- Banner de la jornada -->
    <div class="w-full bg-[#20B2AA] text-white py-4 text-center text-2xl md:text-3xl font-bold shadow-md">
        Primera Jornada de Manejo del Dolor en Pediatr√≠a CASR
    </div>
   
    <main class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-[#00446A] mb-4">El Desaf√≠o del Dolor Pedi√°trico</h1>
            <p class="text-lg text-slate-600 max-w-3xl mx-auto">
                El manejo adecuado del dolor en ni√±os es una piedra angular de la √©tica m√©dica. La falta de analgesia adecuada puede alterar el desarrollo del sistema nervioso y la percepci√≥n futura del dolor. Esta infograf√≠a explora los dos pilares para un manejo eficaz: una **evaluaci√≥n precisa** y un **tratamiento multimodal**.
            </p>
        </header>

        <section id="niveles-dolor" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#0072B2] mb-8">Niveles de Dolor y Estrategias Terap√©uticas</h2>
            <div class="bg-white rounded-lg shadow-md p-6">
                <p class="text-center mb-6 text-slate-700">La intensidad del dolor gu√≠a la elecci√≥n de las intervenciones. Un enfoque escalonado y multimodal asegura un alivio eficaz y seguro. Es importante recordar que este plan es **flexible y adaptativo**; un paciente puede requerir intervenciones de un nivel superior o inferior a su dolor categorizado debido a condiciones individuales, comorbilidades o la respuesta al tratamiento.</p>
                
                <div class="flex flex-col items-center justify-center space-y-8 mt-8">

                    <div class="pain-level-box flex-1 w-full max-w-3xl bg-white rounded-lg shadow-md p-6 border-t-4 border-[#56B4E9]">
                        <h3 class="text-2xl font-bold text-[#00446A] mb-4 text-center">Dolor Leve <span class="text-3xl">üòä</span></h3>
                        <p class="text-sm text-slate-600 mb-4 text-center">Ejemplos: Dolor dental leve, dolor post-vacuna, golpes menores, cefalea tensional.</p>
                        <h4 class="font-semibold text-[#0072B2] mb-2 text-center">Terapias Recomendadas:</h4>
                        <div class="flex flex-wrap justify-center gap-4">
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">üíä</span>
                                <p class="text-sm text-slate-700 font-medium">Paracetamol</p>
                            </div>
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">ü©π</span>
                                <p class="text-sm text-slate-700 font-medium">AINEs</p>
                            </div>
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">üß∏</span>
                                <p class="text-sm text-slate-700 font-medium">No Farmacol√≥gicas</p>
                            </div>
                        </div>
                        <p class="text-sm text-slate-600 mt-4 text-center">**T√©cnicas No Farmacol√≥gicas:** Estrategias que no involucran medicamentos para aliviar el dolor, como la distracci√≥n (juegos, cuentos), la aplicaci√≥n de fr√≠o o calor, masajes suaves, y el apoyo emocional y la comodidad f√≠sica.</p>
                    </div>

                    <div class="pain-level-box flex-1 w-full max-w-3xl bg-white rounded-lg shadow-md p-6 border-t-4 border-[#E69F00]">
                        <h3 class="text-2xl font-bold text-[#00446A] mb-4 text-center">Dolor Moderado <span class="text-3xl">üòê</span></h3>
                        <p class="text-sm text-slate-600 mb-4 text-center">Ejemplos: Fractura simple, dolor postoperatorio moderado, otitis media aguda.</p>
                        <h4 class="font-semibold text-[#0072B2] mb-2 text-center">Terapias Recomendadas:</h4>
                        <div class="flex flex-wrap justify-center gap-4">
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">üíä</span>
                                <p class="text-sm text-slate-700 font-medium">Paracetamol + AINEs</p>
                            </div>
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">üíâ</span>
                                <p class="text-sm text-slate-700 font-medium">Anest√©sicos Locales</p>
                            </div>
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">üß†</span>
                                <p class="text-sm text-slate-700 font-medium">Coadyuvantes</p>
                            </div>
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">üß∏</span>
                                <p class="text-sm text-slate-700 font-medium">No Farmacol√≥gicas</p>
                            </div>
                        </div>
                        <p class="text-sm text-slate-600 mt-4 text-center">**Coadyuvantes:** Medicamentos con mecanismos de acci√≥n distintos a los analg√©sicos tradicionales, que potencian la analgesia o tratan componentes espec√≠ficos del dolor (ej. dolor neurop√°tico), como la Ketamina, Sulfato de Magnesio, Dexmedetomidina, Antidepresivos y Anticonvulsivantes.</p>
                    </div>

                    <div class="pain-level-box flex-1 w-full max-w-3xl bg-white rounded-lg shadow-md p-6 border-t-4 border-[#00446A]">
                        <h3 class="text-2xl font-bold text-[#00446A] mb-4 text-center">Dolor Severo <span class="text-3xl">üò≠</span></h3>
                        <p class="text-sm text-slate-600 mb-4 text-center">Ejemplos: Quemaduras graves, dolor postoperatorio mayor (ej. cirug√≠a card√≠aca, tor√°cica, neurovertebral o abdominal), dolor oncol√≥gico severo.</p>
                        <h4 class="font-semibold text-[#0072B2] mb-2 text-center">Terapias Recomendadas:</h4>
                        <div class="flex flex-wrap justify-center gap-4">
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">‚ûï</span>
                                <p class="text-sm text-slate-700 font-medium">Todas las Anteriores</p>
                            </div>
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">‚ö°</span>
                                <p class="text-sm text-slate-700 font-medium">Opioides</p>
                            </div>
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">üè•</span>
                                <p class="text-sm text-slate-700 font-medium">T√©cnicas Avanzadas</p>
                            </div>
                        </div>
                        <p class="text-sm text-slate-600 mt-4 text-center">**T√©cnicas Avanzadas:** Procedimientos especializados para el manejo del dolor severo, como infusiones epidurales continuas, bloqueos nerviosos prolongados o bombas de analgesia controlada por el paciente (PCA).</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="evaluacion" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#0072B2] mb-8">Evaluaci√≥n del Dolor: Dando Voz a Quienes no la Tienen</h2>
            <div class="bg-white rounded-lg shadow-md p-6">
                <p class="text-center mb-6 text-slate-700">La elecci√≥n de la escala de dolor depende de la edad y la capacidad de comunicaci√≥n del ni√±o. Una evaluaci√≥n precisa es el primer paso para un tratamiento efectivo.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    
                    <div class="border-r-0 md:border-r md:pr-8 border-slate-200">
                        <h3 class="text-2xl font-semibold text-[#00446A] mb-4 text-center">Pacientes Pre-Verbales (&lt; 3 a√±os)</h3>
                        <p class="text-center text-slate-600 mb-6">Para los m√°s peque√±os, se utilizan escalas observacionales que miden respuestas conductuales y fisiol√≥gicas.</p>
                        <div class="space-y-6">
                            <div>
                                <h4 class="font-bold text-lg">Escala <a href="https://www.mdcalc.com/calc/10545/face-legs-activity-cry-consolability-flacc-scale" target="_blank" class="text-blue-600 hover:underline">FLACC</a> (1997)</h4>
                                <p class="text-sm text-slate-500 mb-2">Puntuaci√≥n: 0-10. Componentes: Cara, Piernas, Actividad, Llanto, Consolabilidad.</p>
                                <div class="chart-container max-w-xs mx-auto h-48">
                                    <canvas id="flaccChart"></canvas>
                                </div>
                                <p class="text-center mt-2 text-sm text-slate-600">Ideal para dolor postoperatorio, pero puede confundirse con miedo o ansiedad.</p>
                            </div>
                            <div>
                                <h4 class="font-bold text-lg">Escala <a href="https://www.mdapp.co/cries-pain-scale-calculator-566/" target="_blank" class="text-blue-600 hover:underline">CRIES</a> (1995)</h4>
                                <p class="text-sm text-slate-500 mb-2">Puntuaci√≥n: 0-10. Espec√≠fica para neonatos postoperatorios.</p>
                                <div class="chart-container max-w-xs mx-auto h-48">
                                    <canvas id="criesChart"></canvas>
                                </div>
                                <p class="text-center mt-2 text-sm text-slate-600">Integra signos vitales, pero pueden ser influenciados por otras condiciones m√©dicas.</p>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-2xl font-semibold text-[#00446A] mb-4 text-center">Pacientes Verbales (> 3 a√±os)</h3>
                        <p class="text-center text-slate-600 mb-6">El autoinforme es el est√°ndar de oro. Se utilizan herramientas visuales y num√©ricas.</p>
                         <div class="space-y-6">
                            <div>
                                <h4 class="font-bold text-lg">Escala de Caras de <a href="https://www.google.com/search?q=wong+baker+scale&udm=2&fbs=AIIjpHx4nJjfGojPVHhEACUHPiMQht6_BFq6vBIoFFRK7qchKG1cRgcE0P7z3SNizmlu0Qk8MgiKsZ0mDOS2di7FnzoXfcyjU12QCbBvNbYCec27QfAqVXgiQyZkZmiQvMnPMdWP86qBtee_bmIQS3DL1R2duDeGevl755ZMAFCl4ugXi3r6QsiNA6XMH8XIonyXGvHPnL67EeJVaP06GGUbZ3PFXvAGog&sa=X&sqi=2&ved=2ahUKEwi89KHE0_6NAxVpJ7kGHb-kIxcQtKgLegQIFBAB&biw=1536&bih=695&dpr=1.25#vhid=PcSwHUV2cPm5VM&vssid=mosaic" target="_blank" class="text-blue-600 hover:underline">Wong-Baker</a> (1983)</h4>
                                <p class="text-sm text-slate-500 mb-2">Puntuaci√≥n: 0-10. El ni√±o se√±ala la cara que representa su dolor.</p>
                                <div class="flex justify-between items-center p-4 bg-slate-100 rounded-lg">
                                    <span class="text-3xl">üôÇ</span>
                                    <span class="text-3xl">üòä</span>
                                    <span class="text-3xl">üòê</span>
                                    <span class="text-3xl">üòï</span>
                                    <span class="text-3xl">üò¢</span>
                                    <span class="text-3xl">üò≠</span>
                                </div>
                                <p class="text-center mt-2 text-sm text-slate-600">Ventaja: muy visual. Desventaja: puede confundirse con emociones como la tristeza.</p>
                            </div>
                             <div>
                                <h4 class="font-bold text-lg">Escala Num√©rica (NRS)</h4>
                                <p class="text-sm text-slate-500 mb-2">Para ni√±os mayores de 5 a√±os. El paciente califica su dolor de 0 a 10.</p>
                                 <div class="text-center bg-[#E69F00] text-white p-6 rounded-lg shadow-lg">
                                     <span class="text-5xl font-bold">0 ‚Üî 10</span>
                                     <p class="mt-2">"0 es sin dolor, 10 es el peor dolor imaginable"</p>
                                 </div>
                                <p class="text-center mt-2 text-sm text-slate-600">Ventaja: simple y r√°pida. Desventaja: unidimensional, solo mide intensidad.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-8 text-center bg-slate-100 rounded-lg p-6">
                    <h3 class="text-xl font-semibold text-[#00446A] mb-4">Escalas descargables en espa√±ol y color</h3>
                    <p class="text-slate-600">Encuentra versiones descargables de las escalas de dolor pedi√°trico para tu pr√°ctica cl√≠nica:</p>
                    <a href="https://campusvygon.com/cl/escalas-dolor-rn/" target="_blank" class="inline-block bg-[#0072B2] text-white font-bold py-2 px-4 rounded-lg mt-4 hover:bg-blue-700 transition-colors">
                        Acceder a Escalas
                    </a>
                </div>
            </div>
        </section>

        <section id="tratamiento" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#0072B2] mb-2">El Enfoque Multimodal</h2>
            <p class="text-lg text-slate-600 max-w-3xl mx-auto text-center mb-8">Consiste en combinar f√°rmacos con diferentes mecanismos de acci√≥n para maximizar la analgesia y minimizar los efectos secundarios, especialmente los de los opioides.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">

                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-[#00446A] mb-3">1. No Opioides: La Primera L√≠nea</h3>
                    <p class="text-slate-600 mb-4">El paracetamol y los AINEs son la base de la analgesia multimodal. Su acci√≥n se centra en la inhibici√≥n de la enzima COX.</p>
                    <div class="chart-container h-64">
                        <canvas id="nonOpioidChart"></canvas>
                    </div>
                     <p class="text-sm text-slate-500 mt-4">El paracetamol destaca por su seguridad gastrointestinal, mientras que los AINEs ofrecen un potente efecto antiinflamatorio, crucial en dolores √≥seos o inflamatorios.</p>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-[#00446A] mb-3">2. Metamizol: Ventaja Espasmol√≠tica</h3>
                    <p class="text-slate-600 mb-4">Adem√°s de su potente efecto analg√©sico, el metamizol relaja la musculatura lisa, haci√©ndolo ideal para dolores de tipo c√≥lico.</p>
                    <div class="text-center p-4 bg-slate-100 rounded-lg">
                        <span class="text-4xl">üåÄ</span>
                        <p class="font-semibold text-lg mt-2">Eficaz en Dolor C√≥lico</p>
                        <p class="text-sm text-slate-600">(Renal, Biliar, Intestinal)</p>
                    </div>
                    <div class="mt-4 text-center">
                        <p class="font-semibold text-red-600">Riesgo a Considerar</p>
                        <p class="text-2xl font-bold text-red-500">1.1 / mill√≥n</p>
                        <p class="text-sm text-slate-500">Casos de Agranulocitosis (raro pero grave). Evitar en pacientes suceptibles (Anglosajones, Hematooncol√≥gicos o usuarios de medicamentos con potencial mielodispl√°sico como metotrexato o quimioterapia) </p>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-[#00446A] mb-3">3. Corticoides: Rol Analg√©sico y Antiinflamatorio</h3>
                    <p class="text-slate-600 mb-4">La Dexametasona y otros corticoides son potentes antiinflamatorios, √∫tiles como coadyuvantes para reducir el dolor y el edema.</p>
                    <div class="text-center p-4 bg-slate-100 rounded-lg">
                        <span class="text-4xl">üß™</span>
                        <p class="font-semibold text-lg mt-2">Cascada Inflamatoria</p>
                        <div class="flex flex-col items-center text-slate-700 mt-4">
                            <p class="font-bold">Lesi√≥n Celular</p>
                            <div class="text-xl">‚Üì</div>
                            <p class="font-bold">Fosfol√≠pidos de Membrana</p>
                            <div class="flex items-center">
                                <span class="text-xl">‚Üì</span>
                                <span class="ml-2 text-red-500 text-3xl">üö´</span>
                                <span class="ml-1 text-red-600 font-bold">Corticoides</span>
                            </div>
                            <p class="font-bold">Fosfolipasa A2</p>
                            <div class="text-xl">‚Üì</div>
                            <p class="font-bold">√Åcido Araquid√≥nico</p>
                            <div class="text-xl">‚Üì</div>
                            <div class="flex justify-around w-full mt-2">
                                <div class="flex flex-col items-center">
                                    <p class="font-bold">COX</p>
                                    <div class="text-xl">‚Üì</div>
                                    <p class="text-sm">Prostaglandinas</p>
                                    <p class="text-sm">(Dolor, Inflamaci√≥n)</p>
                                </div>
                                <div class="flex flex-col items-center">
                                    <p class="font-bold">LOX</p>
                                    <div class="text-xl">‚Üì</div>
                                    <p class="text-sm">Leucotrienos</p>
                                    <p class="text-sm">(Inflamaci√≥n, Broncoconstricci√≥n)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <ul class="list-disc list-inside text-sm text-slate-600 mt-4 text-left">
                        <li>**Mecanismo:** Inhibici√≥n de prostaglandinas y leucotrienos.</li>
                        <li>**Rol:** Reduce inflamaci√≥n y edema neural/peritumoral.</li>
                        <li>**Ventajas:** Reduce n√°useas postoperatorias y edema o inflamaci√≥n de tejidos (v√≠a a√©rea). Prolonga el efecto de bloqueos regionales.</li>
                        <li>**Desventajas:** Hiperglicemia (diab√©ticos, poco significativo), inmunosupresi√≥n (uso prolongado), lisis tumoral en sd. linfoproliferativos.</li>
                    </ul>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-[#00446A] mb-3">4. Antagonistas NMDA: Bloqueo Central</h3>
                    <p class="text-slate-600 mb-4">La Ketamina y el Sulfato de Magnesio act√∫an sobre los receptores NMDA, previniendo la "sensibilizaci√≥n central" del dolor. Son claves en dolor neurop√°tico.</p>
                    <div class="chart-container h-64">
                        <canvas id="nmdaChart"></canvas>
                    </div>
                    <p class="text-sm text-slate-500 mt-4">La ketamina es m√°s potente pero con efectos psicod√©licos e hipn√≥ticos-sedantes. El magnesio es menos potente pero con un perfil de seguridad m√°s favorable. Tener precauci√≥n en insuficiencia renal o asociaci√≥n con bloqueadores neuromusculares.</p>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-[#00446A] mb-3">5. Anest√©sicos Locales: Analgesia de Precisi√≥n</h3>
                    <p class="text-slate-600 mb-4">Bloquean los canales de sodio en los nervios perif√©ricos, ofreciendo un alivio del dolor altamente localizado y reduciendo la necesidad de opioides.</p>
                     <div class="chart-container h-64">
                        <canvas id="localAnestheticsChart"></canvas>
                    </div>
                    <p class="text-sm text-slate-500 mt-4">La elecci√≥n depende de la duraci√≥n y efectos requeridos y el perfil de seguridad/toxicidad. El sitio de aplicaci√≥n y la adici√≥n de epinefrina (no mostrada) modifican la absorci√≥n y por tanto pueden modificar la duraci√≥n del efecto y la toxicidad de estos agentes.</p>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-[#00446A] mb-3">6. Adyuvantes para Dolor Neurop√°tico</h3>
                    <p class="text-slate-600 mb-4">Los Antidepresivos y Anticonvulsivantes modulan las v√≠as del dolor a nivel central, siendo esenciales para el dolor cr√≥nico de origen nervioso.</p>
                     <div class="chart-container h-64">
                        <canvas id="neuropathicAdjuvantsChart"></canvas>
                    </div>
                    <p class="text-sm text-slate-500 mt-4">Los antidepresivos tambi√©n tratan comorbilidades como la ansiedad. Los anticonvulsivantes son eficaces pero requieren una titulaci√≥n lenta de la dosis.</p>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-[#00446A] mb-3">7. El Futuro: Inhibidores Selectivos</h3>
                    <p class="text-slate-600 mb-4">La Suzetrigina es un f√°rmaco oral no opioide que inhibe selectivamente el canal de sodio NaV1.8, presente solo en las neuronas del dolor perif√©rico.</p>
                    <div class="space-y-2 text-center p-4">
                        <div class="p-2 bg-blue-100 rounded">Neurona Nociceptiva</div>
                        <div class="text-2xl text-[#0072B2]">‚Üì</div>
                        <div class="p-2 bg-orange-100 border-2 border-orange-400 rounded relative">
                            Canal de Sodio NaV1.8
                            <span class="absolute -right-4 -top-4 text-4xl text-red-500">üö´</span>
                            <span class="absolute -right-12 top-0 text-sm font-bold text-red-600">Suzetrigina</span>
                        </div>
                        <div class="text-2xl text-slate-300">‚Üì</div>
                         <div class="p-2 bg-slate-200 rounded">No hay se√±al de dolor al SNC</div>
                    </div>
                    <p class="text-sm text-slate-500 mt-4">Ventaja clave: analgesia potente sin los efectos secundarios del SNC ni el riesgo de adicci√≥n de los opioides. A√∫n sin datos pedi√°tricos.</p>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-[#00446A] mb-3">8. Opioides: Analgesia Potente</h3>
                    <p class="text-slate-600 mb-4">Los opioides son los analg√©sicos m√°s potentes, actuando sobre receptores espec√≠ficos en el SNC para el dolor severo.</p>
                    <div class="text-center p-4 bg-slate-100 rounded-lg flex flex-col items-center">
                        <div class="chart-container h-48 w-full mb-4">
                            <canvas id="opioidPotencyChart"></canvas>
                        </div>
                        <p class="font-semibold text-lg mt-2">Activaci√≥n de Receptores Œº</p>
                        <ul class="list-disc list-inside text-sm text-slate-600 mt-2 text-left w-full">
                            <li>**Mecanismo:** Agonistas de receptores Œº-opioides.</li>
                            <li>**Ejemplos:** Morfina, Fentanilo, Metadona, Tapentadol.</li>
                            <li>**Ventajas:** Analgesia superior para dolor severo.</li>
                            <li>**Desventajas:** Depresi√≥n respiratoria, apnea, √≠leo y retenci√≥n urinaria, prurito, n√°useas, sedaci√≥n, riesgo de adicci√≥n.</li>
                            <li>**Uso s√≥lo desde adolescencia:** Tramadol, Code√≠na (dependen de metabolizaci√≥n y efecto no predecible).</li>
                             <li>**Importante:** Deben usarse en unidades con monitorizaci√≥n adecuada y personal entrenado en el manejo de sus complicaciones.</li>
                        </ul>
                    </div>
                </div>

            </div>
        </section>

        <section id="how-to-administer" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#0072B2] mb-8">El "C√≥mo": M√°s all√° del Qu√© en la Analgesia Pedi√°trica</h2>
            <div class="bg-white rounded-lg shadow-md p-6">
                <p class="text-center mb-6 text-slate-700">No solo importa *qu√©* f√°rmaco usamos, sino *c√≥mo* lo administramos. Un plan flexible y multimodal, adaptado a cada ni√±o, es clave para el √©xito.</p>
                <div class="flex flex-col items-center justify-center space-y-8 mt-8">

                    <div class="flex-1 w-full max-w-3xl bg-white rounded-lg shadow-md p-6 border-t-4 border-[#00446A]">
                        <h3 class="text-2xl font-bold text-[#00446A] mb-4 text-center">PLAN FLEXIBLE</h3>
                        <p class="text-sm text-slate-600 mb-4 text-center">Un plan que se adapta y reeval√∫a constantemente seg√∫n la evoluci√≥n del paciente.</p>
                        <div class="flex flex-wrap justify-center gap-4">
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">üîÑ</span>
                                <p class="text-sm text-slate-700 font-medium">Reevaluaci√≥n Constante</p>
                            </div>
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">üéØ</span>
                                <p class="text-sm text-slate-700 font-medium">Ajuste Individual</p>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 w-full max-w-3xl bg-white rounded-lg shadow-md p-6 border-t-4 border-[#E69F00]">
                        <h3 class="text-2xl font-bold text-[#00446A] mb-4 text-center">MULTIMODALIDAD</h3>
                        <p class="text-sm text-slate-600 mb-4 text-center">Combinaci√≥n de diferentes f√°rmacos y t√©cnicas con distintos mecanismos de acci√≥n.</p>
                        <div class="flex flex-wrap justify-center gap-4">
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">üß™</span>
                                <p class="text-sm text-slate-700 font-medium">M√∫ltiples Mecanismos</p>
                            </div>
                            <div class="flex flex-col items-center text-center">
                                <span class="text-4xl">‚¨áÔ∏è</span>
                                <p class="text-sm text-slate-700 font-medium">Menos Efectos Adversos</p>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 w-full max-w-3xl bg-white rounded-lg shadow-md p-6 border-t-4 border-[#56B4E9]">
                        <h3 class="text-2xl font-bold text-[#00446A] mb-4 text-center">V√çA Y ESQUEMA DE ADMINISTRACI√ìN</h3>
                        <p class="text-sm text-slate-600 mb-4 text-center">Seleccionar las v√≠as m√°s seguras, confortables, factibles y efectivas, y los esquemas que mejor se adapten al dolor.</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="flex flex-col items-center text-center bg-slate-50 p-3 rounded-lg">
                                <span class="text-4xl">üëÑ</span>
                                <p class="text-sm text-slate-700 font-medium">V√≠a Oral</p>
                                <p class="text-xs text-slate-500">Menos invasiva y simple. Gotas, Jarabes, c√°psulas, comprimidos.</p>
                            </div>
                            <div class="flex flex-col items-center text-center bg-slate-50 p-3 rounded-lg">
                                <span class="text-4xl">üíâ</span>
                                <p class="text-sm text-slate-700 font-medium">V√≠a Intravenosa / IM</p>
                                <p class="text-xs text-slate-500">Acci√≥n r√°pida y efectiva, pero invasiva.</p>
                            </div>
                             <div class="flex flex-col items-center text-center bg-slate-50 p-3 rounded-lg">
                                <span class="text-4xl">üíâ</span>
                                <p class="text-sm text-slate-700 font-medium">V√≠a Subcut√°nea (SC)</p>
                                <p class="text-xs text-slate-500">Acci√≥n sist√©mica lenta y predecible, menos invasiva.</p>
                            </div>
                            <div class="flex flex-col items-center text-center bg-slate-50 p-3 rounded-lg">
                                <span class="text-4xl">üíä</span>
                                <p class="text-sm text-slate-700 font-medium">V√≠a Rectal (Supositorio)</p>
                                <p class="text-xs text-slate-500">Opci√≥n si v√≠a oral no es posible. Riesgo de absorci√≥n err√°tica y sobredosis.</p>
                            </div>
                             <div class="flex flex-col items-center text-center bg-slate-50 p-3 rounded-lg">
                                <span class="text-4xl">üåê</span>
                                <p class="text-sm text-slate-700 font-medium">Bloqueos Regionales (perif√©ricos y neuroaxiales)</p>
                                <p class="text-xs text-slate-500">Analgesia localizada y efectiva, pero invasiva. Reduce necesidad de analgesia sist√©mica (ej. opioides).</p>
                            </div>
                            <div class="flex flex-col items-center text-center bg-slate-50 p-3 rounded-lg">
                                <span class="text-4xl">‚è∞</span>
                                <p class="text-sm text-slate-700 font-medium">Esquemas de administraci√≥n combinados</p>
                                <p class="text-xs text-slate-500">Horario, Continuo y/o PCA + Rescate (SOS).</p>
                            </div>
                        </div>
                         <p class="text-xs text-red-500 mt-4 text-center font-semibold">"Siempre con SOS, pero NUNCA SOS exclusivo."</p>
                         <p class="text-xs text-red-500 mt-4 text-center font-semibold">"Continuo (BIC) no es mejor que horario bien programado."</p>
                         <p class="text-xs text-red-500 mt-4 text-center font-semibold">"PCA requiere "dosis de carga" y sirve de mantenci√≥n pero no de iniciaci√≥n."</p>

                    </div>

                    <div class="flex-1 w-full max-w-3xl bg-white rounded-lg shadow-md p-6 border-t-4 border-[#F0E442]">
                        <h3 class="text-2xl font-bold text-[#00446A] mb-4 text-center">ENFOQUE INDIVIDUALIZADO</h3>
                        <p class="text-sm text-slate-600 mb-4 text-center">Adaptar el tratamiento a las caracter√≠sticas √∫nicas de cada paciente y el tipo de dolor.</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="flex flex-col items-center text-center bg-slate-50 p-3 rounded-lg">
                                <span class="text-4xl">üë∂üëµ</span>
                                <p class="text-sm text-slate-700 font-medium">Edad y Desarrollo</p>
                            </div>
                            <div class="flex flex-col items-center text-center bg-slate-50 p-3 rounded-lg">
                                <span class="text-4xl">üß¨</span>
                                <p class="text-sm text-slate-700 font-medium">Funci√≥n Org√°nica y Comorbilidades</p>
                            </div>
                            <div class="flex flex-col items-center text-center bg-slate-50 p-3 rounded-lg">
                                <span class="text-4xl">ü§ß</span>
                                <p class="text-sm text-slate-700 font-medium">Alergias e Intolerancias</p>
                            </div>
                            <div class="flex flex-col items-center text-center bg-slate-50 p-3 rounded-lg">
                                <span class="text-4xl">üìà</span>
                                <p class="text-sm text-slate-700 font-medium">Intensidad y Tipo de Dolor (Som√°tico, Visceral, Neurop√°tico, Mixto)</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <section id="recommendations-to-avoid" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#0072B2] mb-8">Recomendaciones a Evitar en el Manejo del Dolor Pedi√°trico</h2>
            <div class="bg-white rounded-lg shadow-md p-6">
                <p class="text-center mb-6 text-slate-700">Para optimizar la seguridad y eficacia de la analgesia pedi√°trica, es crucial evitar ciertas pr√°cticas.</p>
                <ul class="list-none space-y-4 text-slate-700">
                    <li class="flex items-start">
                        <span class="text-red-500 text-2xl mr-3 mt-1">‚ùå</span>
                        <p><strong>Combinar COX-2 selectivo con COX no selectivo:</strong> No aporta beneficio analg√©sico adicional y aumenta los riesgos de efectos adversos.</p>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-500 text-2xl mr-3 mt-1">‚ùå</span>
                        <p><strong>Usar Paracetamol SOS en dolor moderado-severo:</strong> El paracetamol por s√≠ solo tiene un efecto limitado en estos niveles de dolor y retrasar la analgesia adecuada es perjudicial.</p>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-500 text-2xl mr-3 mt-1">‚ùå</span>
                        <p><strong>Suspender analg√©sicos coadyuvantes por el uso de PCA, anestesia regional u otra modalidad analg√©sica:</strong> La multimodalidad es clave; estos f√°rmacos act√∫an por diferentes mecanismos y son complementarios, no sustitutos.</p>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-500 text-2xl mr-3 mt-1">‚ùå</span>
                        <p><strong>Usar solo analg√©sicos en modalidad SOS:</strong> Especialmente en dolor moderado a severo, un esquema horario con rescates es fundamental para un control sostenido del dolor.</p>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-500 text-2xl mr-3 mt-1">‚ùå</span>
                        <p><strong>Prolongar el uso de AINEs m√°s de 5 d√≠as (idealmente &le; 3 d√≠as):</strong> El uso prolongado aumenta significativamente los riesgos gastrointestinales, renales y cardiovasculares.</p>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-500 text-2xl mr-3 mt-1">‚ùå</span>
                        <p><strong>Usar AINEs en menores de 3-6 meses o con disfunci√≥n renal/hep√°tica o patolog√≠a inflamatoria digestiva:</strong> Estas condiciones aumentan el riesgo de toxicidad y complicaciones graves.</p>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-500 text-2xl mr-3 mt-1">‚ùå</span>
                        <p><strong>Usar esquemas inflexibles de alivio de dolor o exclusivamente un grupo de f√°rmacos en dolor moderado o severo:</strong> El dolor pedi√°trico requiere un plan adaptativo y multimodal para ser eficaz.</p>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-500 text-2xl mr-3 mt-1">‚ùå</span>
                        <p><strong>Limitar la analgesia a un solo mecanismo de acci√≥n (¬°hay m√°s que AINEs!):</strong> La analgesia multimodal aprovecha m√∫ltiples v√≠as para un alivio superior y menos efectos adversos.</p>
                    </li>
                </ul>
            </div>
        </section>

        <section id="when-to-seek-help" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#0072B2] mb-8">¬øCu√°ndo pedir ayuda en el manejo del dolor?</h2>
            <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                <p class="text-center mb-6 text-slate-700">La intervenci√≥n temprana de un equipo especializado puede mejorar significativamente el pron√≥stico del dolor en pediatr√≠a.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-slate-100 rounded-lg p-4 flex items-center shadow-sm">
                        <span class="text-3xl mr-4 text-blue-500">‚è≥</span>
                        <p class="text-slate-700 font-semibold">1) Pacientes con dolor cr√≥nico</p>
                    </div>
                    <div class="bg-slate-100 rounded-lg p-4 flex items-center shadow-sm">
                        <span class="text-3xl mr-4 text-green-500">üîó</span>
                        <p class="text-slate-700 font-semibold">2) Usuarios de opioides cr√≥nicos</p>
                    </div>
                    <div class="bg-slate-100 rounded-lg p-4 flex items-center shadow-sm">
                        <span class="text-3xl mr-4 text-red-500">üö´</span>
                        <p class="text-slate-700 font-semibold">3) Dolor refractario a analgesia multimodal sist√©mica</p>
                    </div>
                    <div class="bg-slate-100 rounded-lg p-4 flex items-center shadow-sm">
                        <span class="text-3xl mr-4 text-purple-500">üî¨</span>
                        <p class="text-slate-700 font-semibold">4) Necesidad de manejo intervencional</p>
                    </div>
                    <div class="bg-slate-100 rounded-lg p-4 flex items-center shadow-sm">
                        <span class="text-3xl mr-4 text-yellow-500">‚ö†Ô∏è</span>
                        <p class="text-slate-700 font-semibold">5) Alergias, intolerancia o contraindicaci√≥n a m√∫ltiples analg√©sicos</p>
                    </div>
                    <div class="bg-slate-100 rounded-lg p-4 flex items-center shadow-sm">
                        <span class="text-3xl mr-4 text-gray-500">üéóÔ∏è</span>
                        <p class="text-slate-700 font-semibold">6) Dolor oncol√≥gico</p>
                    </div>
                </div>
            </div>

            <h3 class="text-2xl font-bold text-center text-[#00446A] mb-6">¬øA qui√©n acudir? Equipo Multidisciplinario</h3>
            <div class="bg-white rounded-lg shadow-md p-6">
                <p class="text-center mb-6 text-slate-700">El manejo integral del dolor pedi√°trico a menudo requiere la colaboraci√≥n de diversos especialistas.</p>
                <div class="flex flex-wrap justify-center gap-6">
                    <div class="text-center p-4 bg-blue-50 rounded-lg shadow-sm">
                        <span class="text-4xl">üë®‚Äç‚öïÔ∏è</span>
                        <p class="text-slate-700 font-semibold mt-2">Anestesi√≥logo</p>
                    </div>
                    <div class="text-center p-4 bg-green-50 rounded-lg shadow-sm">
                        <span class="text-4xl">üß†</span>
                        <p class="text-slate-700 font-semibold mt-2">Psiquiatra/Psic√≥logo</p>
                    </div>
                    <div class="text-center p-4 bg-orange-50 rounded-lg shadow-sm">
                        <span class="text-4xl">üí™</span>
                        <p class="text-slate-700 font-semibold mt-2">Fisiatra</p>
                    </div>
                    <div class="text-center p-4 bg-purple-50 rounded-lg shadow-sm">
                        <span class="text-4xl">üåü</span>
                        <p class="text-slate-700 font-semibold mt-2">Paliativios/Onco-Radioterapeuta</p>
                    </div>
                    <div class="text-center p-4 bg-yellow-50 rounded-lg shadow-sm">
                        <span class="text-4xl">ü§ù</span>
                        <p class="text-sm text-slate-700 font-semibold mt-2">Otros especialistas (ej. Quir√∫rgicas)</p>
                    </div>
                </div>
            </div>
        </section>
     <!-- Nueva Secci√≥n de Herramientas Interactivas -->
        <section id="comentarios-preguntas" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#0072B2] mb-8">COMENTARIOS Y HERRAMIENTAS INTERACTIVAS</h2>
            <div class="bg-white rounded-lg shadow-md p-6">
                <p class="text-center mb-6 text-slate-700">Explora estas herramientas interactivas dise√±adas para potenciar tu conocimiento y pr√°ctica en el manejo del dolor pedi√°trico.</p>
                <p class="text-center mb-6 text-red-700 font-semibold">¬°Las preguntas m√°s votadas ser√°n resueltas a lo largo de la jornada!</p>
     
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secciones Interactivas</title>
    <!-- Carga de Tailwind CSS para estilos modernos y responsivos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define la fuente Inter para todo el documento */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* Color de fondo suave */
        }
        /* Estilos personalizados para los contenedores de comentario y pregunta */
        .card {
            background-color: #ffffff;
            border-radius: 0.75rem; /* Esquinas redondeadas */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 1rem;
            margin-bottom: 1rem;
        }
        /* Estilos para el √°rea de texto */
        textarea {
            resize: vertical; /* Permite redimensionar verticalmente */
        }
        /* Estilos para los botones de env√≠o */
        .submit-button {
            background-image: linear-gradient(to right, #6EE7B7, #3B82F6); /* Gradiente de color */
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .submit-button:hover {
            transform: translateY(-2px); /* Efecto flotante al pasar el rat√≥n */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }
        /* Estilos para el bot√≥n de +1 */
        .vote-button {
            background-color: #4F46E5; /* Indigo */
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            font-size: 0.875rem; /* sm */
            line-height: 1.25rem; /* sm */
        }
        .vote-button:hover {
            background-color: #4338CA; /* Darker Indigo */
            transform: translateY(-1px);
        }
        .vote-button:active {
            transform: translateY(0);
        }
        /* Estilos para el contenedor de mensajes de carga/error */
        .message-box {
            background-color: #fff;
            border-radius: 0.75rem;
            padding: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            display: none; /* Oculto por defecto */
            text-align: center;
        }
        .message-box.show {
            display: block;
        }
        /* Estilos para el slider de puntuaci√≥n */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: #d1d5db;
            border-radius: 5px;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }

        input[type="range"]:hover {
            opacity: 1;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #3B82F6;
            border: 2px solid #fff;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #3B82F6;
            border: 2px solid #fff;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="p-4 bg-gray-100 min-h-screen flex items-start justify-center">
    <div class="max-w-3xl w-full bg-white p-6 rounded-xl shadow-lg flex flex-col space-y-8">

        <!-- Secci√≥n de Comentarios -->
        <div class="w-full">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">¬øY qu√© te pareci√≥ esta secci√≥n informativa?</h2>

            <!-- Contenedor del formulario para nuevos comentarios -->
            <div class="mb-8 p-4 bg-blue-50 rounded-xl border border-blue-200">
                <h3 class="text-xl font-semibold text-blue-800 mb-4">Deja tu comentario</h3>

                <!-- Campo para el nombre del usuario -->
                <div class="mb-4">
                    <label for="commentUserNameInput" class="block text-gray-700 text-sm font-medium mb-2">Tu Nombre (opcional):</label>
                    <input type="text" id="commentUserNameInput" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Ej: Juan P√©rez">
                </div>

                <!-- Secci√≥n de puntuaci√≥n con escala de caritas personalizada -->
                <div class="mb-4 p-4 bg-yellow-50 rounded-xl border border-yellow-200 text-center">
                    <label for="ratingSlider" class="block text-gray-700 text-sm font-medium mb-1">0 - 10</label>
                    <p class="text-gray-600 text-sm text-center mb-2">Calif√≠cala usando una escala de dolorüòâ (0 maravilloso, 10 lo peor que he visto).</p>
                    <div class="flex items-center justify-center space-x-4 mb-2">
                        <input type="range" id="ratingSlider" min="0" max="10" value="5" class="w-2/3 cursor-pointer">
                        <span id="ratingValue" class="text-2xl font-bold text-gray-800">5</span>
                    </div>
                    <div id="ratingFace" class="text-6xl mt-2">üòê</div> <!-- Cara por defecto -->
                </div>

                <div class="mb-4">
                    <label for="commentInput" class="block text-gray-700 text-sm font-medium mb-2">Tu comentario:</label>
                    <textarea id="commentInput" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                </div>
                <button id="submitComment" class="submit-button w-full">Publicar Comentario</button>
            </div>

            <!-- Contenedor donde se mostrar√°n los comentarios din√°micamente -->
            <div id="commentsContainer" class="space-y-4">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4 border-b pb-2">Comentarios Recientes</h3>
                <p id="loadingComments" class="text-center text-gray-500">Cargando comentarios...</p>
            </div>
        </div>

        <!-- Nueva Secci√≥n de Preguntas -->
        <div class="w-full mt-8 pt-8 border-t border-gray-200">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">¬°Deja tus preguntas o inquietudes!</h2>

            <!-- Contenedor del formulario para nuevas preguntas -->
            <div class="mb-8 p-4 bg-green-50 rounded-xl border border-green-200">
                <h3 class="text-xl font-semibold text-green-800 mb-4">Haz tu pregunta</h3>
                <!-- Campo para el nombre del usuario en preguntas (opcional) -->
                <div class="mb-4">
                    <label for="questionUserNameInput" class="block text-gray-700 text-sm font-medium mb-2">Tu Nombre (opcional):</label>
                    <input type="text" id="questionUserNameInput" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Ej: Ana L√≥pez">
                </div>
                <div class="mb-4">
                    <label for="questionInput" class="block text-gray-700 text-sm font-medium mb-2">Tu pregunta:</label>
                    <textarea id="questionInput" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"></textarea>
                </div>
                <button id="submitQuestion" class="submit-button w-full">Publicar Pregunta</button>
            </div>

            <!-- Contenedor donde se mostrar√°n las preguntas din√°micamente -->
            <div id="questionsContainer" class="space-y-4">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4 border-b pb-2">Preguntas Recientes</h3>
                <p id="loadingQuestions" class="text-center text-gray-500">Cargando preguntas...</p>
            </div>
        </div>

        <!-- Contenedor de mensajes (para carga, √©xito, error) -->
        <div id="messageBox" class="message-box">
            <p id="messageText"></p>
            <button id="closeMessageBox" class="mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg">Cerrar</button>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script type="module">
        // Importa las funciones necesarias de Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        // Importa `getDocs` para obtener todos los documentos sin un orden inicial
        // Se asegura que `orderBy` sea importado correctamente.
        import { getFirestore, collection, addDoc, query, orderBy, onSnapshot, serverTimestamp, updateDoc, doc, increment, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Variables globales para Firebase (proporcionadas por el entorno de Canvas)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db; // Instancia de Firestore
        let auth; // Instancia de Auth
        let userId = 'anonymous'; // ID del usuario, por defecto 'anonymous'
        let isAuthReady = false; // Bandera para indicar si la autenticaci√≥n est√° lista

        // Elementos de la secci√≥n de comentarios
        const commentUserNameInput = document.getElementById('commentUserNameInput');
        const ratingSlider = document.getElementById('ratingSlider');
        const ratingValueSpan = document.getElementById('ratingValue');
        const ratingFace = document.getElementById('ratingFace');
        const commentInput = document.getElementById('commentInput');
        const submitCommentButton = document.getElementById('submitComment');
        const commentsContainer = document.getElementById('commentsContainer');
        const loadingComments = document.getElementById('loadingComments');

        // Elementos de la secci√≥n de preguntas
        const questionUserNameInput = document.getElementById('questionUserNameInput');
        const questionInput = document.getElementById('questionInput');
        const submitQuestionButton = document.getElementById('submitQuestion');
        const questionsContainer = document.getElementById('questionsContainer');
        const loadingQuestions = document.getElementById('loadingQuestions');

        // Elementos del cuadro de mensajes global
        const messageBox = document.getElementById('messageBox');
        const messageText = document.getElementById('messageText');
        const closeMessageBoxButton = document.getElementById('closeMessageBox');

        /**
         * Muestra un mensaje en el cuadro de mensajes (modal).
         * @param {string} message El texto del mensaje.
         * @param {string} type El tipo de mensaje ('success', 'error', 'loading').
         */
        function showMessage(message, type) {
            messageText.textContent = message;
            messageBox.className = 'message-box show'; // Muestra el cuadro de mensajes
            if (type === 'error') {
                messageBox.style.backgroundColor = '#f8d7da';
                messageBox.style.color = '#721c24';
            } else if (type === 'success') {
                messageBox.style.backgroundColor = '#d4edda';
                messageBox.style.color = '#155724';
            } else if (type === 'loading') {
                messageBox.style.backgroundColor = '#e2e3e5';
                messageBox.style.color = '#383d41';
            }
        }

        /**
         * Oculta el cuadro de mensajes.
         */
        function hideMessageBox() {
            messageBox.className = 'message-box'; // Oculta el cuadro de mensajes
        }

        // Listener para cerrar el cuadro de mensajes
        closeMessageBoxButton.addEventListener('click', hideMessageBox);

        /**
         * Define las caras para cada puntuaci√≥n de 0 a 10.
         */
        const ratingFaces = [
            'ü§©', // 0: Muy contento / emocionado
            'üòÅ', // 1: Gran sonrisa
            'üòÑ', // 2: Ojos sonrientes
            'üòä', // 3: Contento
            'üôÇ', // 4: Ligeramente sonriente
            'üòê', // 5: Neutral
            'üôÅ', // 6: Ligeramente triste
            'üòü', // 7: Preocupado
            'üò©', // 8: Angustiado / Cansado
            'üò´', // 9: Muy cansado / Frustrado
            'üò≠'  // 10: Llorando / Muy triste
        ];

        /**
         * Actualiza la cara mostrada seg√∫n la puntuaci√≥n.
         * @param {number} rating La puntuaci√≥n seleccionada (0-10).
         */
        function updateRatingFace(rating) {
            // Asegura que el rating est√© dentro del rango de los √≠ndices del array
            const faceIndex = Math.min(Math.max(rating, 0), ratingFaces.length - 1);
            ratingFace.textContent = ratingFaces[faceIndex];
        }

        // Inicializa la cara con el valor inicial del slider
        updateRatingFace(parseInt(ratingSlider.value));

        // Event listener para el slider de puntuaci√≥n
        ratingSlider.addEventListener('input', (event) => {
            const currentRating = parseInt(event.target.value);
            ratingValueSpan.textContent = currentRating;
            updateRatingFace(currentRating);
        });

        /**
         * Inicializa Firebase y configura la autenticaci√≥n.
         */
        async function initializeFirebase() {
            try {
                // Inicializa la aplicaci√≥n Firebase
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                // Escucha los cambios en el estado de autenticaci√≥n
                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        // Usuario autenticado (incluye an√≥nimos o con token)
                        userId = user.uid;
                        isAuthReady = true;
                        console.log("Usuario autenticado. UID:", userId);
                        // Una vez autenticado, carga los comentarios y preguntas
                        loadComments();
                        loadQuestions();
                    } else {
                        // Si no hay usuario, intenta iniciar sesi√≥n an√≥nimamente
                        console.log("No hay usuario autenticado. Intentando iniciar sesi√≥n an√≥nimamente...");
                        await signInAnonymously(auth); // Intenta iniciar sesi√≥n an√≥nimamente
                        // La l√≥gica de `onAuthStateChanged` se encargar√° de establecer userId e isAuthReady
                    }
                });

                // Si se proporciona un token de autenticaci√≥n inicial, √∫salo para iniciar sesi√≥n
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                    console.log("Sesi√≥n iniciada con token personalizado.");
                } else {
                    // Si no hay token inicial, intenta iniciar sesi√≥n an√≥nimamente de inmediato
                    await signInAnonymously(auth);
                    console.log("Sesi√≥n iniciada an√≥nimamente.");
                }

            } catch (error) {
                console.error("Error al inicializar Firebase o autenticar:", error);
                showMessage(`Error al inicializar la aplicaci√≥n: ${error.message}`, 'error');
            }
        }

        /**
         * Agrega un nuevo comentario a Firestore.
         */
        async function addComment() {
            if (!isAuthReady || !db) {
                console.log("Firebase o autenticaci√≥n no est√°n listos.");
                showMessage("La aplicaci√≥n no est√° lista. Int√©ntalo de nuevo.", 'error');
                return;
            }

            const userName = commentUserNameInput.value.trim();
            const commentText = commentInput.value.trim();
            const rating = parseInt(ratingSlider.value); // Obtiene el valor entero de la puntuaci√≥n

            if (commentText === '') {
                showMessage("Por favor, escribe un comentario antes de publicar.", 'error');
                return;
            }

            // Validar que la puntuaci√≥n sea un n√∫mero entre 0 y 10
            if (isNaN(rating) || rating < 0 || rating > 10) {
                showMessage("Por favor, selecciona una puntuaci√≥n v√°lida entre 0 y 10.", 'error');
                return;
            }

            showMessage("Publicando comentario...", 'loading');
            submitCommentButton.disabled = true; // Deshabilita el bot√≥n mientras se env√≠a

            try {
                // Ruta de la colecci√≥n para comentarios p√∫blicos
                const commentsCollectionRef = collection(db, `artifacts/${appId}/public/data/comments`);
                await addDoc(commentsCollectionRef, {
                    userId: userId, // ID del usuario que publica el comentario
                    userName: userName || `Usuario An√≥nimo (${userId ? userId.substring(0, 6) : 'N/A'}...)`, // Nombre del usuario, o un nombre por defecto
                    comment: commentText,
                    rating: rating, // Agrega la puntuaci√≥n
                    timestamp: serverTimestamp() // Marca de tiempo del servidor para ordenar
                });
                commentInput.value = ''; // Limpia el √°rea de texto
                commentUserNameInput.value = ''; // Limpia el campo de nombre
                ratingSlider.value = 5; // Reinicia el slider a 5
                updateRatingFace(5); // Reinicia la cara
                showMessage("Comentario publicado con √©xito.", 'success');
            } catch (e) {
                console.error("Error al agregar documento: ", e);
                showMessage(`Error al publicar el comentario: ${e.message}`, 'error');
            } finally {
                submitCommentButton.disabled = false; // Habilita el bot√≥n de nuevo
                setTimeout(hideMessageBox, 3000); // Oculta el mensaje despu√©s de 3 segundos
            }
        }

        /**
         * Carga y muestra los comentarios existentes en tiempo real.
         */
        function loadComments() {
            if (!isAuthReady || !db) {
                console.log("Firebase o autenticaci√≥n no est√°n listos para cargar comentarios.");
                return;
            }

            // Muestra el mensaje de carga
            loadingComments.style.display = 'block';
            commentsContainer.innerHTML = '<h3 class="text-2xl font-semibold text-gray-800 mb-4 border-b pb-2">Comentarios Recientes</h3><p id="loadingComments" class="text-center text-gray-500">Cargando comentarios...</p>';

            // Referencia a la colecci√≥n de comentarios
            const commentsCollectionRef = collection(db, `artifacts/${appId}/public/data/comments`);
            // Crea una consulta para ordenar los comentarios por fecha descendente
            const q = query(commentsCollectionRef, orderBy('timestamp', 'desc'));

            // Escucha los cambios en tiempo real
            onSnapshot(q, (snapshot) => {
                // Elimina el mensaje de carga una vez que se reciben los datos
                const currentLoading = document.getElementById('loadingComments');
                if (currentLoading) {
                    currentLoading.remove();
                }

                if (snapshot.empty) {
                    // Si no hay comentarios, muestra un mensaje
                    commentsContainer.innerHTML = '<h3 class="text-2xl font-semibold text-gray-800 mb-4 border-b pb-2">Comentarios Recientes</h3><p class="text-center text-gray-500">S√© el primero en dejar un comentario.</p>';
                    return;
                }

                // Limpia los comentarios existentes para evitar duplicados
                commentsContainer.innerHTML = '<h3 class="text-2xl font-semibold text-gray-800 mb-4 border-b pb-2">Comentarios Recientes</h3>';

                snapshot.forEach((doc) => {
                    const commentData = doc.data();
                    // Obtiene el nombre de usuario, si no se proporciona, usa un nombre an√≥nimo con parte del ID
                    const displayUserName = commentData.userName || `Usuario An√≥nimo (${commentData.userId ? commentData.userId.substring(0, 6) : 'N/A'}...)`;
                    const displayRating = commentData.rating !== undefined ? commentData.rating : 'No especificado';
                    let ratingEmoji = '';

                    // Si hay una puntuaci√≥n, determina la cara correspondiente del array ratingFaces
                    if (commentData.rating !== undefined) {
                        const faceIndex = Math.min(Math.max(commentData.rating, 0), ratingFaces.length - 1);
                        ratingEmoji = ratingFaces[faceIndex];
                    }

                    // Formatea la fecha si existe
                    let dateString = 'Fecha desconocida';
                    if (commentData.timestamp && commentData.timestamp.toDate) {
                        const date = commentData.timestamp.toDate();
                        dateString = date.toLocaleString(); // Formato de fecha legible
                    }

                    const commentDiv = document.createElement('div');
                    commentDiv.className = 'card'; // Clase para estilos de tarjeta (se cambi√≥ de comment-card a card)

                    commentDiv.innerHTML = `
                        <p class="text-sm text-gray-500 mb-1 flex items-center justify-between">
                            <span class="font-bold text-gray-800">${displayUserName}</span>
                            ${displayRating !== 'No especificado' ? `<span class="ml-2 px-2 py-0.5 bg-indigo-100 text-indigo-800 rounded-full text-xs flex items-center">Puntuaci√≥n: ${displayRating} <span class="ml-1 text-base">${ratingEmoji}</span></span>` : ''}
                        </p>
                        <p class="text-gray-700 text-lg">${commentData.comment}</p>
                        <p class="text-xs text-gray-400 mt-2 text-right">${dateString}</p>
                    `;
                    commentsContainer.appendChild(commentDiv);
                });
            }, (error) => {
                console.error("Error al escuchar los comentarios: ", error);
                const currentLoading = document.getElementById('loadingComments');
                if (currentLoading) {
                    currentLoading.remove();
                }
                commentsContainer.innerHTML = `<h3 class="text-2xl font-semibold text-gray-800 mb-4 border-b pb-2">Comentarios Recientes</h3><p class="text-center text-red-500">Error al cargar comentarios: ${error.message}</p>`;
                showMessage(`Error al cargar comentarios: ${error.message}`, 'error');
            });
        }

        /**
         * Agrega una nueva pregunta a Firestore.
         */
        async function addQuestion() {
            if (!isAuthReady || !db) {
                console.log("Firebase o autenticaci√≥n no est√°n listos.");
                showMessage("La aplicaci√≥n no est√° lista. Int√©ntalo de nuevo.", 'error');
                return;
            }

            const userName = questionUserNameInput.value.trim();
            const questionText = questionInput.value.trim();

            if (questionText === '') {
                showMessage("Por favor, escribe tu pregunta antes de publicar.", 'error');
                return;
            }

            showMessage("Publicando pregunta...", 'loading');
            submitQuestionButton.disabled = true; // Deshabilita el bot√≥n mientras se env√≠a

            try {
                // Ruta de la colecci√≥n para preguntas p√∫blicas
                const questionsCollectionRef = collection(db, `artifacts/${appId}/public/data/questions`);
                await addDoc(questionsCollectionRef, {
                    userId: userId, // ID del usuario que publica la pregunta
                    userName: userName || `Usuario An√≥nimo (${userId ? userId.substring(0, 6) : 'N/A'}...)`, // Nombre del usuario, o un nombre por defecto
                    question: questionText,
                    votes: 0, // Inicializa los votos en 0
                    timestamp: serverTimestamp() // Marca de tiempo del servidor para ordenar
                });
                questionInput.value = ''; // Limpia el √°rea de texto
                questionUserNameInput.value = ''; // Limpia el campo de nombre
                showMessage("Pregunta publicada con √©xito.", 'success');
            } catch (e) {
                console.error("Error al agregar documento de pregunta: ", e);
                showMessage(`Error al publicar la pregunta: ${e.message}`, 'error');
            } finally {
                submitQuestionButton.disabled = false; // Habilita el bot√≥n de nuevo
                setTimeout(hideMessageBox, 3000); // Oculta el mensaje despu√©s de 3 segundos
            }
        }

        /**
         * Incrementa los votos de una pregunta en Firestore.
         * @param {string} questionId El ID del documento de la pregunta.
         */
        async function updateVote(questionId) {
            if (!isAuthReady || !db) {
                console.log("Firebase o autenticaci√≥n no est√°n listos.");
                showMessage("La aplicaci√≥n no est√° lista para votar. Int√©ntalo de nuevo.", 'error');
                return;
            }

            try {
                const questionRef = doc(db, `artifacts/${appId}/public/data/questions`, questionId);
                await updateDoc(questionRef, {
                    votes: increment(1) // Incrementa el campo 'votes' en 1
                });
                console.log("Voto registrado con √©xito para la pregunta:", questionId);
            } catch (e) {
                console.error("Error al actualizar el voto: ", e);
                showMessage(`Error al votar: ${e.message}`, 'error');
            }
        }

        /**
         * Carga y muestra las preguntas existentes en tiempo real, ordenadas por votos.
         */
        function loadQuestions() {
            if (!isAuthReady || !db) {
                console.log("Firebase o autenticaci√≥n no est√°n listos para cargar preguntas.");
                return;
            }

            // Muestra el mensaje de carga
            loadingQuestions.style.display = 'block';
            questionsContainer.innerHTML = '<h3 class="text-2xl font-semibold text-gray-800 mb-4 border-b pb-2">Preguntas Recientes</h3><p id="loadingQuestions" class="text-center text-gray-500">Cargando preguntas...</p>';

            // Referencia a la colecci√≥n de preguntas
            const questionsCollectionRef = collection(db, `artifacts/${appId}/public/data/questions`);
            // Se obtiene la consulta sin orderBy para evitar el error de √≠ndice compuesto en Firestore.
            const q = query(questionsCollectionRef);

            // Escucha los cambios en tiempo real
            onSnapshot(q, (snapshot) => {
                // Elimina el mensaje de carga una vez que se reciben los datos
                const currentLoading = document.getElementById('loadingQuestions');
                if (currentLoading) {
                    currentLoading.remove();
                }

                if (snapshot.empty) {
                    // Si no hay preguntas, muestra un mensaje
                    questionsContainer.innerHTML = '<h3 class="text-2xl font-semibold text-gray-800 mb-4 border-b pb-2">Preguntas Recientes</h3><p class="text-center text-gray-500">S√© el primero en hacer una pregunta.</p>';
                    return;
                }

                // Recopila los datos y los ordena en el cliente
                let questions = [];
                snapshot.forEach((doc) => {
                    questions.push({ id: doc.id, ...doc.data() });
                });

                // Ordena las preguntas por votos (descendente) y luego por timestamp (descendente)
                questions.sort((a, b) => {
                    // Ordena por votos de mayor a menor
                    if (b.votes !== a.votes) {
                        return (b.votes || 0) - (a.votes || 0);
                    }
                    // Si los votos son iguales, ordena por timestamp de m√°s reciente a m√°s antigua
                    const dateA = a.timestamp && a.timestamp.toDate ? a.timestamp.toDate() : new Date(0);
                    const dateB = b.timestamp && b.timestamp.toDate ? b.timestamp.toDate() : new Date(0);
                    return dateB.getTime() - dateA.getTime();
                });


                // Limpia las preguntas existentes para evitar duplicados
                questionsContainer.innerHTML = '<h3 class="text-2xl font-semibold text-gray-800 mb-4 border-b pb-2">Preguntas Recientes</h3>';

                questions.forEach((questionData) => {
                    const questionId = questionData.id; // Obtiene el ID del documento para la funci√≥n de votar
                    const displayUserName = questionData.userName || `Usuario An√≥nimo (${questionData.userId ? questionData.userId.substring(0, 6) : 'N/A'}...)`;

                    // Formatea la fecha si existe
                    let dateString = 'Fecha desconocida';
                    if (questionData.timestamp && questionData.timestamp.toDate) {
                        const date = questionData.timestamp.toDate();
                        dateString = date.toLocaleString(); // Formato de fecha legible
                    }

                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'card'; // Clase para estilos de tarjeta

                    questionDiv.innerHTML = `
                        <p class="text-sm text-gray-500 mb-1 flex items-center justify-between">
                            <span class="font-bold text-gray-800">${displayUserName}</span>
                            <span class="text-xs text-gray-400">${dateString}</span>
                        </p>
                        <p class="text-gray-700 text-lg mb-3">${questionData.question}</p>
                        <div class="flex items-center justify-end">
                            <span class="text-sm text-gray-600 mr-2">Votos: ${questionData.votes !== undefined ? questionData.votes : 0}</span>
                            <button class="vote-button" data-question-id="${questionId}">+1</button>
                        </div>
                    `;
                    questionsContainer.appendChild(questionDiv);

                    // Adjunta el event listener al bot√≥n de +1
                    const voteButton = questionDiv.querySelector(`button[data-question-id="${questionId}"]`);
                    if (voteButton) {
                        voteButton.addEventListener('click', () => updateVote(questionId));
                    }
                });
            }, (error) => {
                console.error("Error al escuchar las preguntas: ", error);
                const currentLoading = document.getElementById('loadingQuestions');
                if (currentLoading) {
                    currentLoading.remove();
                }
                questionsContainer.innerHTML = `<h3 class="text-2xl font-semibold text-gray-800 mb-4 border-b pb-2">Preguntas Recientes</h3><p class="text-center text-red-500">Error al cargar preguntas: ${error.message}</p>`;
                showMessage(`Error al cargar preguntas: ${error.message}`, 'error');
            });
        }

        // Listeners para los botones de enviar
        submitCommentButton.addEventListener('click', addComment);
        submitQuestionButton.addEventListener('click', addQuestion);

        // Inicializa Firebase cuando la ventana se haya cargado
        window.onload = initializeFirebase;
    </script>
</body>
</html>
           
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

                    <!-- Secci√≥n 1: Casos Cl√≠nicos Interactivos con Toma de Decisiones -->
                    <div class="bg-slate-50 rounded-lg shadow-sm p-6">
                        <h3 class="text-2xl font-bold text-[#00446A] mb-4 text-center">Casos Cl√≠nicos Interactivos ü©∫</h3>
                        <p class="text-slate-700 mb-6 text-center">Analiza un caso y toma decisiones sobre la evaluaci√≥n y analgesia. Obt√©n retroalimentaci√≥n.</p>
                        
                        <div class="border border-slate-200 rounded-lg p-4 mb-4">
                            <p class="font-semibold text-lg mb-2">Caso: Ni√±o de 4 a√±os, post-amigdalectom√≠a, se muestra irritable y no quiere comer. Sus padres reportan que no ha dormido bien.</p>
                            <p class="mb-4">¬øQu√© escala de dolor ser√≠a la m√°s adecuada para evaluar a este paciente?</p>
                            
                            <div class="flex flex-col space-y-2">
                                <label class="inline-flex items-center">
                                    <input type="radio" class="form-radio text-[#0072B2]" name="case1_q1" value="wongBaker" id="case1_wongBaker">
                                    <span class="ml-2 text-slate-700">Escala de Caras de Wong-Baker</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" class="form-radio text-[#0072B2]" name="case1_q1" value="flacc" id="case1_flacc">
                                    <span class="ml-2 text-slate-700">Escala FLACC</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" class="form-radio text-[#0072B2]" name="case1_q1" value="nrs" id="case1_nrs">
                                    <span class="ml-2 text-slate-700">Escala Num√©rica (NRS)</span>
                                </label>
                            </div>
                            
                            <button id="checkCase1" class="mt-4 bg-[#00446A] text-white py-2 px-4 rounded-lg hover:bg-blue-800 transition-colors">
                                Verificar Respuesta
                            </button>
                            <div id="feedbackCase1" class="mt-4 p-3 rounded-md hidden"></div>
                        </div>
                    </div>

                    <!-- Secci√≥n 2: "Construye tu Plan Multimodal" (Simulador) -->
                    <div class="bg-slate-50 rounded-lg shadow-sm p-6">
                        <h3 class="text-2xl font-bold text-[#00446A] mb-4 text-center">Construye tu Plan Multimodal üõ†Ô∏è</h3>
                        <p class="text-slate-700 mb-6 text-center">Ingresa los datos del paciente para obtener una sugerencia de plan analg√©sico multimodal.</p>

                        <div class="space-y-4 mb-6">
                            <div>
                                <label for="painLevel" class="block text-slate-700 font-semibold mb-2">Nivel de Dolor:</label>
                                <select id="painLevel" class="w-full p-2 border border-slate-300 rounded-md">
                                    <option value="leve">Leve</option>
                                    <option value="moderado">Moderado</option>
                                    <option value="severo">Severo</option>
                                </select>
                            </div>
                            <div>
                                <label for="ageGroup" class="block text-slate-700 font-semibold mb-2">Grupo de Edad:</label>
                                <select id="ageGroup" class="w-full p-2 border border-slate-300 rounded-md">
                                    <option value="preVerbal">Pre-verbal (&lt; 3 a√±os)</option>
                                    <option value="verbal">Verbal (&ge; 3 a√±os)</option>
                                </select>
                            </div>
                             <div>
                                <label for="painType" class="block text-slate-700 font-semibold mb-2">Tipo de Dolor:</label>
                                <select id="painType" class="w-full p-2 border border-slate-300 rounded-md">
                                    <option value="som√°tico">Som√°tico</option>
                                    <option value="visceral">Visceral</option>
                                    <option value="neurop√°tico">Neurop√°tico</option>
                                    <option value="mixto">Mixto</option>
                                </select>
                            </div>
                        </div>

                        <button id="generatePlan" class="w-full bg-[#E69F00] text-white py-2 px-4 rounded-lg hover:bg-orange-700 transition-colors">
                            Generar Plan
                        </button>

                        <div id="planOutput" class="mt-6 p-4 bg-slate-100 rounded-md hidden">
                            <h3 class="font-bold text-[#00446A] mb-2">Plan Sugerido:</h3>
                            <p id="planText" class="text-slate-700"></p>
                        </div>
                    </div>

                    <!-- Secci√≥n 3: "Mitos vs. Realidades" del Dolor Pedi√°trico (Tarjetas Interactivas) -->
                    <div class="lg:col-span-2 bg-slate-50 rounded-lg shadow-sm p-6">
                        <h3 class="text-2xl font-bold text-[#00446A] mb-4 text-center">Mitos vs. Realidades del Dolor Pedi√°trico üí°</h3>
                        <p class="text-slate-700 mb-6 text-center">Haz clic en las tarjetas para descubrir la realidad detr√°s de las afirmaciones comunes.</p>

                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <div class="flip-card-container">
                                <div class="flip-card flip-card-inner" tabindex="0">
                                    <div class="flip-card-front">
                                        <span class="text-6xl mb-2">üë∂</span>
                                        <p class="text-lg font-semibold">"Los beb√©s no sienten dolor igual que los adultos."</p>
                                    </div>
                                    <div class="flip-card-back">
                                        <p class="text-lg font-bold">REALIDAD</p>
                                        <p class="text-sm mt-2">Los reci√©n nacidos y lactantes sienten dolor de forma plena, y la exposici√≥n al dolor sin tratar puede tener consecuencias a largo plazo en su desarrollo neurol√≥gico y respuesta al estr√©s.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="flip-card-container">
                                <div class="flip-card flip-card-inner" tabindex="0">
                                    <div class="flip-card-front">
                                        <span class="text-6xl mb-2">‚ö°</span>
                                        <p class="text-lg font-semibold">"Los opioides siempre causan adicci√≥n en ni√±os."</p>
                                    </div>
                                    <div class="flip-card-back">
                                        <p class="text-lg font-bold">REALIDAD</p>
                                        <p class="text-sm mt-2">El riesgo de adicci√≥n a opioides cuando se usan para el manejo del dolor agudo en un entorno hospitalario es extremadamente bajo en ni√±os. El dolor no tratado es un riesgo mayor.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="flip-card-container">
                                <div class="flip-card flip-card-inner" tabindex="0">
                                    <div class="flip-card-front">
                                        <span class="text-6xl mb-2">ü§´</span>
                                        <p class="text-lg font-semibold">"Si el ni√±o no se queja, no tiene dolor."</p>
                                    </div>
                                    <div class="flip-card-back">
                                        <p class="text-lg font-bold">REALIDAD</p>
                                        <p class="text-sm mt-2">Los ni√±os pueden no verbalizar su dolor por miedo, por querer ser "valientes", o por no saber c√≥mo expresarlo. Los cambios en el comportamiento son indicadores clave.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Secci√≥n 4: Simulador de Evaluaci√≥n del Dolor (Mini-Juego) -->
                    <div class="lg:col-span-2 bg-slate-50 rounded-lg shadow-sm p-6">
                        <h3 class="text-2xl font-bold text-[#00446A] mb-4 text-center">Simulador de Evaluaci√≥n del Dolor üìà</h3>
                        <p class="text-slate-700 mb-6 text-center">Elige la escala m√°s adecuada para evaluar el dolor en este caso.</p>

                        <div class="text-center mb-6">
                            <p class="text-sm text-slate-600 mb-2">Escenario: Ni√±o de 1 a√±o despu√©s de una ca√≠da, tiene la pierna roja e hinchada y llora sin consuelo.</p>
                            <span id="childFace" class="text-8xl">üò¢</span>
                        </div>

                        <div class="flex flex-col space-y-2">
                            <button class="evaluate-button bg-[#56B4E9] text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors" data-scale="flacc">
                                Usar Escala FLACC
                            </button>
                            <button class="evaluate-button bg-[#56B4E9] text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors" data-scale="cries">
                                Usar Escala CRIES
                            </button>
                            <button class="evaluate-button bg-[#56B4E9] text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors" data-scale="wongBaker">
                                Usar Escala de Caras de Wong-Baker
                            </button>
                        </div>
                        <div id="evaluationFeedback" class="mt-4 p-3 rounded-md hidden"></div>
                    </div>

                </div>
            </div>
        </section>

        <footer class="text-center mt-12 pt-8 border-t border-slate-200">
            <h3 class="text-2xl font-bold text-[#00446A] mb-4">Hacia un Futuro sin Dolor para los Ni√±os</h3>
            <p class="text-lg text-slate-600 max-w-3xl mx-auto">
                La gesti√≥n exitosa del dolor pedi√°trico combina una evaluaci√≥n precisa y continua con un tratamiento multimodal e individualizado. La investigaci√≥n constante y la educaci√≥n de los profesionales y cuidadores son fundamentales para garantizar que cada ni√±o reciba un cuidado compasivo y eficaz.
            </p>
        </footer>

    </main>

    <script>
        function wrapLabel(str, max_width) {
            if (typeof str !== 'string' || str.length <= max_width) {
                return str;
            }
            const words = str.split(' ');
            const lines = [];
            let current_line = '';
            for (const word of words) {
                if ((current_line + ' ' + word).trim().length > max_width && current_line.length > 0) {
                    lines.push(current_line);
                    current_line = word;
                } else {
                    current_line = (current_line + ' ' + word).trim();
                }
            }
            if (current_line.length > 0) {
                lines.push(current_line);
            }
            return lines;
        }

        const commonTooltipCallback = {
            plugins: {
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                              return label.join(' ');
                            } else {
                              return label;
                            }
                        }
                    }
                },
                legend: {
                    position: 'bottom',
                }
            }
        };

        const palette = {
            darkBlue: '#00446A',
            mediumBlue: '#0072B2',
            lightBlue: '#56B4E9',
            orange: '#E69F00',
            yellow: '#F0E442',
            slate: '#64748b',
            darkRed: '#CC0000'
        };

        new Chart(document.getElementById('flaccChart'), {
            type: 'doughnut',
            data: {
                labels: ['Cara', 'Piernas', 'Actividad', 'Llanto', 'Consolabilidad'],
                datasets: [{
                    label: 'Componentes FLACC',
                    data: [1, 1, 1, 1, 1],
                    backgroundColor: [palette.darkBlue, palette.mediumBlue, palette.lightBlue, palette.orange, palette.yellow],
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: { display: true, text: '5 Componentes Observacionales' }
                }
            }
        });
        
        new Chart(document.getElementById('criesChart'), {
            type: 'pie',
            data: {
                labels: ['Llanto', 'Req. O2', 'Signos Vitales', 'Expresi√≥n', 'Insomnio'],
                datasets: [{
                    label: 'Componentes CRIES',
                    data: [1, 1, 1, 1, 1],
                    backgroundColor: [palette.darkBlue, palette.mediumBlue, palette.lightBlue, palette.orange, palette.yellow],
                     borderWidth: 2,
                     borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: { display: true, text: '5 Componentes Fisiol√≥gicos y Conductuales' }
                }
            }
        });
        
        new Chart(document.getElementById('nonOpioidChart'), {
            type: 'bar',
            data: {
                labels: ['Paracetamol', 'AINEs (ej. Ibuprofeno)'],
                datasets: [
                    {
                        label: 'Efecto Analg√©sico',
                        data: [8, 9],
                        backgroundColor: palette.mediumBlue,
                    },
                    {
                        label: 'Efecto Antiinflamatorio',
                        data: [2, 9],
                        backgroundColor: palette.lightBlue,
                    },
                    {
                        label: 'Riesgo Gastrointestinal',
                        data: [1, 7],
                        backgroundColor: palette.orange,
                    }
                ]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { stacked: true, display: false },
                    y: { stacked: true }
                },
                ...commonTooltipCallback
            }
        });
        
        new Chart(document.getElementById('nmdaChart'), {
            type: 'bubble',
            data: {
                datasets: [{
                    label: 'Ketamina',
                    data: [{x: 9, y: 9, r: 8}],
                    backgroundColor: palette.darkBlue
                }, {
                    label: 'Sulfato de Magnesio',
                    data: [{x: 5, y: 4, r: 4}],
                    backgroundColor: palette.orange
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: { display: true, text: 'Potencia Analg√©sica' }
                    },
                    y: {
                        title: { display: true, text: 'Efecto Sedante' }
                    }
                },
                plugins: {
                    tooltip: {
                         callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += `(Potencia: ${context.parsed.x}, Sedaci√≥n: ${context.parsed.y}, Riesgo CV: ${context.raw.r})`;
                                return label;
                            }
                        }
                    },
                    legend: { position: 'bottom', }
                }
            }
        });

        new Chart(document.getElementById('localAnestheticsChart'), {
            type: 'line',
            data: {
                labels: ['0h', '1h', '2h', '3h', '4h', '5h', '6h'],
                datasets: [
                    {
                        label: 'Lidoca√≠na',
                        data: [10, 8, 5, 2, 0, 0, 0],
                        borderColor: palette.lightBlue,
                        tension: 0.1
                    },
                    {
                        label: 'Mepivaca√≠na',
                        data: [10, 9, 6, 3, 1, 0, 0],
                        borderColor: palette.orange,
                        tension: 0.1
                    },
                    {
                        label: 'Bupivaca√≠na / Ropivaca√≠na',
                        data: [10, 10, 9, 8, 6, 4, 2],
                        borderColor: palette.darkBlue,
                        tension: 0.1
                    }
                ]
            },
            options: {
                 responsive: true,
                maintainAspectRatio: false,
                 scales: {
                    y: {
                        title: { display: true, text: 'Efecto Analg√©sico Relativo' },
                        min: 0,
                        max: 11
                    }
                },
                ...commonTooltipCallback
            }
        });

        new Chart(document.getElementById('neuropathicAdjuvantsChart'), {
            type: 'radar',
            data: {
                labels: [
                    'Eficacia Dolor Neurop√°tico', 
                    wrapLabel('Trata Comorbilidades (Ansiedad)', 16),
                    wrapLabel('Efectos Adversos SNC', 16), 
                    'Rapidez de Acci√≥n',
                    'Necesidad de Titulaci√≥n'
                ],
                datasets: [{
                    label: 'Antidepresivos (ATC/IRSN)',
                    data: [8, 9, 6, 3, 7],
                    fill: true,
                    backgroundColor: 'rgba(0, 114, 178, 0.2)',
                    borderColor: palette.mediumBlue,
                    pointBackgroundColor: palette.mediumBlue,
                }, {
                    label: 'Anticonvulsivantes (Gabapentinoides)',
                    data: [9, 3, 7, 4, 9],
                    fill: true,
                    backgroundColor: 'rgba(230, 159, 0, 0.2)',
                    borderColor: palette.orange,
                    pointBackgroundColor: palette.orange,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                ...commonTooltipCallback
            }
        });

        new Chart(document.getElementById('opioidPotencyChart'), {
            type: 'bar',
            data: {
                labels: [wrapLabel('Potencia Analg√©sica', 16), wrapLabel('Riesgo Depresi√≥n Respiratoria/Apnea', 16), wrapLabel('N√°useas, prurito, √≠leo', 16), wrapLabel('Necesidad de monitorizaci√≥n', 16)],
                datasets: [{
                    label: 'Opioides',
                    data: [10, 7, 4, 10],
                    backgroundColor: [palette.darkBlue, palette.orange, palette.mediumBlue, palette.darkRed],
                    borderWidth: 1
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 10,
                        display: false
                    },
                    y: {
                        grid: {
                            display: false
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                const item = tooltipItems[0];
                                let label = item.chart.data.labels[item.dataIndex];
                                if (Array.isArray(label)) {
                                  return label.join(' ');
                                } else {
                                  return label;
                                }
                            }
                        }
                    },
                    title: {
                        display: true,
                        text: 'Potencia vs. Riesgos'
                    }
                }
            }
        });

        // L√≥gica para Casos Cl√≠nicos Interactivos
        document.getElementById('checkCase1').addEventListener('click', () => {
            const feedbackDiv = document.getElementById('feedbackCase1');
            const selectedOption = document.querySelector('input[name="case1_q1"]:checked');
            
            if (selectedOption) {
                if (selectedOption.value === 'flacc') {
                    feedbackDiv.className = 'mt-4 p-3 rounded-md bg-green-100 text-green-800';
                    feedbackDiv.textContent = '¬°Correcto! La escala FLACC es ideal para este ni√±o de 4 a√±os postoperatorio, ya que es observacional y eval√∫a su comportamiento. Podr√≠a combinarse con otras escalas dependiendo del grado de colaboraci√≥n del ni√±o.';
                } else {
                    feedbackDiv.className = 'mt-4 p-3 rounded-md bg-red-100 text-red-800';
                    feedbackDiv.textContent = 'No del todo correcto. La Escala de Caras podr√≠a ser confusa si est√° irritable/triste, y la NRS no es adecuada para esta edad si no coopera. FLACC es mejor para postoperatorios en pacientes irritables o poco comunicativos.';
                }
                feedbackDiv.classList.remove('hidden');
            } else {
                feedbackDiv.className = 'mt-4 p-3 rounded-md bg-yellow-100 text-yellow-800';
                feedbackDiv.textContent = 'Por favor, selecciona una opci√≥n.';
                feedbackDiv.classList.remove('hidden');
            }
        });

        // L√≥gica para "Construye tu Plan Multimodal"
        document.getElementById('generatePlan').addEventListener('click', () => {
            const painLevel = document.getElementById('painLevel').value;
            const ageGroup = document.getElementById('ageGroup').value;
            const painType = document.getElementById('painType').value;
            const planOutput = document.getElementById('planOutput');
            const planText = document.getElementById('planText');
            
            let plan = "Tu plan sugerido es: ";

            if (painLevel === 'leve') {
                plan += "Paracetamol o AINEs. Considera t√©cnicas no farmacol√≥gicas.";
            } else if (painLevel === 'moderado') {
                plan += "Paracetamol + AINEs. Coadyuvantes (ej. Ketamina si hay componente neurop√°tico). Considera anest√©sicos locales.";
                if (ageGroup === 'preVerbal') {
                    plan += " Evaluaci√≥n con escalas observacionales (FLACC/CRIES).";
                } else {
                    plan += " Evaluaci√≥n con escala de Caras o NRS.";
                }
            } else if (painLevel === 'severo') {
                plan += "Opioides + Paracetamol + AINEs. Coadyuvantes y t√©cnicas avanzadas (bloqueos regionales).";
                 if (ageGroup === 'preVerbal') {
                    plan += " Evaluaci√≥n continua con escalas observacionales (FLACC/CRIES).";
                } else {
                    plan += " Evaluaci√≥n continua con escala de Caras o NRS.";
                }
            }

            if (painType === 'neurop√°tico' || painType === 'mixto') {
                plan += " Adicionalmente, considera antidepresivos o anticonvulsivantes si el dolor persiste o tiene caracter√≠sticas neurop√°ticas.";
            }
            plan += " Siempre bajo monitorizaci√≥n adecuada y adaptado a las caracter√≠sticas individuales del paciente.";

            planText.textContent = plan;
            planOutput.classList.remove('hidden');
        });

        // L√≥gica para "Mitos vs. Realidades"
        document.querySelectorAll('.flip-card').forEach(card => {
            card.addEventListener('click', () => {
                card.classList.toggle('is-flipped');
            });
            // Habilitar interacci√≥n con teclado para accesibilidad
            card.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    card.classList.toggle('is-flipped');
                }
            });
        });

        // L√≥gica para Simulador de Evaluaci√≥n del Dolor
        document.querySelectorAll('.evaluate-button').forEach(button => {
            button.addEventListener('click', (e) => {
                const selectedScale = e.target.dataset.scale;
                const feedbackDiv = document.getElementById('evaluationFeedback');
                const childFace = document.getElementById('childFace');

                let feedbackText = "";
                let feedbackClass = "";

                // Cambiar la cara del ni√±o y dar feedback seg√∫n la escala
                if (selectedScale === 'flacc') {
                    childFace.textContent = 'üòü'; // Expresi√≥n de dolor evaluable
                    feedbackText = '¬°Buena elecci√≥n! Para un ni√±o de 1 a√±o, la escala FLACC es muy adecuada ya que se basa en la observaci√≥n del comportamiento.';
                    feedbackClass = 'bg-green-100 text-green-800';
                } else if (selectedScale === 'cries') {
                    childFace.textContent = 'üò©'; // Expresi√≥n de dolor con esfuerzo
                    feedbackText = 'La escala CRIES es m√°s espec√≠fica para neonatos y lactantes, integrando signos vitales. Podr√≠a ser √∫til, pero FLACC es m√°s general para pre-verbales.';
                    feedbackClass = 'bg-yellow-100 text-yellow-800';
                } else if (selectedScale === 'wongBaker') {
                    childFace.textContent = 'üò¢'; // Expresi√≥n de llanto o tristeza
                    feedbackText = 'Para un ni√±o de 1 a√±o, la escala de Caras de Wong-Baker no es la m√°s adecuada, ya que requiere que el ni√±o entienda las expresiones y se√±ale. Es mejor para ni√±os verbales mayores de 3 a√±os.';
                    feedbackClass = 'bg-red-100 text-red-800';
                }

                feedbackDiv.className = `mt-4 p-3 rounded-md ${feedbackClass}`;
                feedbackDiv.textContent = feedbackText;
                feedbackDiv.classList.remove('hidden');
            });
        });
    </script>
</body>
</html>
